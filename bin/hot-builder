#!/usr/bin/env node

var argv = require('minimist')(process.argv.slice(2), {
  alias: {
    'i': 'input',
    'o': 'output',
    'a': 'all'
  }
});
var builder = require('./lib/builder');
var fs = require('fs');


if (argv._.length === 0 && Object.keys(argv).length === 1 || argv._.indexOf('help') !== -1) {
  fs.createReadStream(__dirname + '/lib/help.txt')
      .pipe(process.stdout)
      .on('close', function () {
        process.exit(1);
      })
    ;
}
if (argv._.indexOf('version') !== -1) {
  console.log(require('../package.json').name + ' builder v' + require('../package.json').version);
}
if (argv._.length === 1 && argv._.indexOf('build') !== -1) {
  if (!argv.output) {
    console.log('No output file specified'.error);

    return;
  }
  builder(argv);
}

